<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keichii Official | The Chaos</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Press+Start+2P&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f0f0f;
            --card-bg: #1f1f1f;
            --text-main: #ffffff;
            --text-sub: #b0b0b0;
            --accent: #ff0000;
            --accent-hover: #cc0000;
            --nav-bg: rgba(15, 15, 15, 0.9);
            --font-family: 'Noto Sans JP', sans-serif;
            --gold: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
            cursor: default;
        }

        body {
            background: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-family);
            overflow-x: hidden;
            transition: 0.5s;
            position: relative;
        }

        a {
            text-decoration: none;
            color: inherit;
            cursor: pointer;
        }

        button {
            cursor: pointer;
        }

        ul {
            list-style: none;
        }

        img {
            display: block;
            max-width: 100%;
        }

        /* Helpers */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: bold;
            border: none;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
            transition: 0.3s;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.5);
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 2.5rem;
            border-bottom: 4px solid var(--accent);
            display: inline-block;
            padding-bottom: 5px;
        }

        /* 12. News Ticker */
        #news-ticker {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--accent);
            color: white;
            z-index: 900;
            font-weight: bold;
            overflow: hidden;
            white-space: nowrap;
            font-size: 0.9rem;
            padding: 5px 0;
        }

        #news-ticker span {
            display: inline-block;
            animation: scroll-left 20s linear infinite;
            padding-left: 100%;
        }

        @keyframes scroll-left {
            100% {
                transform: translateX(-100%);
            }
        }

        /* Navigation */
        #navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--nav-bg);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 900;
            color: white;
        }

        .logo span {
            color: var(--accent);
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            font-weight: 700;
            font-size: 0.8rem;
            color: var(--text-sub);
        }

        .nav-links a:hover {
            color: white;
            color: var(--accent);
        }

        /* Hero */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(rgba(0, 0, 0, 0.6), var(--bg-color)), url('https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover;
            padding-top: 70px;
            position: relative;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 20px;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        /* 4. Cursor Trail (Canvas) */
        #cursor-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
        }

        /* 11. Fake Visitor Counter */
        .retro-counter {
            font-family: 'Press Start 2P', cursive;
            background: black;
            border: 2px solid #555;
            padding: 10px;
            color: #0f0;
            margin-top: 20px;
            display: inline-block;
            font-size: 0.8rem;
        }

        /* 2. Soundboard */
        #soundboard {
            position: fixed;
            bottom: 40px;
            right: 20px;
            z-index: 800;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sound-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: #333;
            color: white;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            transition: 0.2s;
        }

        .sound-btn:hover {
            transform: scale(1.1);
            background: var(--accent);
        }

        /* 1. Infinite Like */
        #like-btn-container {
            text-align: center;
            margin: 40px 0;
        }

        .heart-particle {
            position: fixed;
            font-size: 1.5rem;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 999;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-100px) scale(2);
            }
        }



        /* 7. Clicker Game */
        #clicker-section {
            text-align: center;
            background: #111;
            padding: 40px;
            border-radius: 10px;
            margin: 40px auto;
            max-width: 400px;
            border: 1px solid #333;
        }

        /* 13. BBS */
        #bbs-section {
            background: #1a1a1a;
            padding: 40px;
            border-radius: 10px;
            margin-top: 50px;
        }

        .bbs-post {
            background: #222;
            padding: 15px;
            border-bottom: 1px solid #333;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .bbs-name {
            color: var(--accent);
            font-weight: bold;
            font-size: 0.9rem;
        }

        .bbs-msg {
            font-size: 1rem;
            margin-top: 5px;
            color: #eee;
        }

        /* 8. Cult Quiz */
        .quiz-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #222;
            padding: 30px;
            border: 2px solid var(--accent);
            z-index: 2000;
            text-align: center;
            display: none;
            width: 90%;
            max-width: 400px;
        }

        /* 9. Glitch */
        .glitch-active {
            animation: glitch-anim 0.2s infinite;
            filter: hue-rotate(90deg);
        }

        @keyframes glitch-anim {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-5px, 5px);
            }

            40% {
                transform: translate(5px, -5px);
            }

            60% {
                transform: translate(-5px, -5px);
            }

            80% {
                transform: translate(5px, 5px);
            }

            100% {
                transform: translate(0);
            }
        }

        /* 10. Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f00;
            z-index: 9999;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
            }
        }

        /* 15. Gravity Mode */
        .falling {
            transition: transform 2s ease-in;
            transform: translateY(1000px) rotate(45deg);
        }

        /* IP Ban Overlay */
        #banned-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 10000;
            color: red;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', monospace;
            text-align: center;
        }

        /* Others from previous v2 */
        .admin-panel {
            background: #1a1a1a;
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            border: 1px solid var(--accent);
            overflow-y: auto;
            max-height: 90vh;
        }

        .admin-section {
            background: #111;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 8px;
            background: #222;
            border: 1px solid #444;
            color: white;
            margin-bottom: 10px;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .video-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: 0.3s;
        }

        .video-thumbnail {
            aspect-ratio: 16/9;
            background: #000;
            position: relative;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Keichii Specs */
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .spec-item {
            background: #222;
            padding: 20px;
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }

        .spec-label {
            color: var(--text-sub);
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        .spec-val {
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Keichii Specs */
        .trophy {
            aspect-ratio: 1;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 10px;
            opacity: 0.3;
            filter: grayscale(1);
            transition: 0.3s;
        }

        .trophy.unlocked {
            opacity: 1;
            filter: grayscale(0);
            background: #444;
            box-shadow: 0 0 10px gold;
            cursor: pointer;
        }

        .trophy.unlocked:hover {
            transform: scale(1.1);
        }

        /* Mobile */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .nav-links {
                display: none;
            }
        }
    </style>
</head>

<body>

    <!-- IP BAN SCREEN -->
    <div id="banned-screen">
        <h1 style="font-size: 4rem;">üö´ BANNED</h1>
        <p>You have been permanently banned from this website.</p>
        <p style="font-size: 0.8rem; margin-top: 20px;">Reason: Being too weak.</p>
        <button onclick="unbanUser()" class="btn" style="background: white; color: black; margin-top: 30px;">
            „Åî„ÇÅ„Çì„Å™„Åï„ÅÑ (BANËß£Èô§)
        </button>
    </div>

    <!-- NEWS TICKER -->
    <div id="news-ticker">
        <span id="ticker-content">KEICHII CHANNEL OFFICIAL SITE OPEN! /// „ÉÅ„É£„É≥„Éç„É´ÁôªÈå≤„Çà„Çç„Åó„ÅèÔºÅ /// „Åë„ÅÑ„Å°„ÅÑÊúÄÂº∑ /// „Éù„ÉÜ„Éà„ÅØ‰ªäÊó•„ÇÇ„Éù„ÉÜ„Éà ///
            Êöá„Å£„Å°„Éº„ÅØÁ•û /// „ÅØ„Çã„ÅØËø∑Â≠ê /// ‰æùÈ†º„ÅØDM„Åæ„Åß /// </span>
    </div>

    <!-- CURSOR CANVAS -->
    <canvas id="cursor-canvas"></canvas>



    <!-- SOUNDBOARD -->
    <div id="soundboard">
        <button class="sound-btn" onclick="playSound('bruh')">üîä</button>
        <button class="sound-btn" onclick="playSound('wow')">‚ú®</button>
        <button class="sound-btn" onclick="toggleGlitch()">üëæ</button>
        <button class="sound-btn" onclick="toggleGravity()">‚òÑÔ∏è</button>
    </div>

    <!-- NAV -->
    <nav id="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">KEICHII<span>.</span></a>
            <ul class="nav-links">
                <li><a href="#hero">HOME</a></li>
                <li><a href="#videos">VIDEOS</a></li>
                <li><a href="#gacha">GACHA</a></li>
                <li><a href="#bbs-section">BBS</a></li>
                <li><a href="#bbs-section">BBS</a></li>
                <li id="nav-login-item"><a href="#" onclick="openLoginModal()">LOGIN</a></li>
                <li id="nav-user-item" style="display:none; color:var(--accent); font-weight:bold;"></li>
                <li id="nav-kp-item" style="display:none; color:gold; font-weight:bold; cursor:pointer;"
                    onclick="openShop()">0 KP</li>
                <li><a href="#admin-trigger-btn">ADMIN</a></li>
            </ul>
        </div>
    </nav>

    <!-- HERO -->
    <header id="hero" class="hero">
        <div class="hero-content container">
            <h1>KEICHII<br>CHANNEL</h1>
            <p>„Ç≤„Éº„É†„Å®Êó•Â∏∏„ÄÅ„Ç´„Ç™„Çπ„Å™‰∏ñÁïå„Å∏„Çà„ÅÜ„Åì„Åù„ÄÇ</p>
            <div class="retro-counter">VISITOR: <span id="visitor-count">099999</span></div>
            <div style="margin-top: 30px;">
                <a href="https://www.youtube.com/channel/UCQEzA7Osw6Wm2jTdZgTTpmg?sub_confirmation=1" target="_blank"
                    class="btn">Subscribe</a>
                <button onclick="startConfetti()" class="btn"
                    style="background:var(--gold); color:black; margin-left:10px;">Celebrate!</button>
            </div>
        </div>
    </header>

    <!-- INFINITE LIKE -->
    <div class="container" id="like-btn-container">
        <button class="btn" onclick="spawnHeart(event)" style="background: #e91e63; font-size: 1.5rem;">‚ù§Ô∏è INFINITE
            LIKE</button>
    </div>

    <!-- CLICKER GAME -->
    <div class="container">
        <div id="clicker-section">
            <h3>KEICHII CLICKER</h3>
            <div id="click-count" style="font-size: 3rem; font-weight: 900; margin: 10px 0;">0</div>
            <button class="btn" onclick="clickerIncrement()">CLICK ME!</button>
        </div>
    </div>

    <!-- OMIKUJI -->
    <div class="container" style="text-align: center; margin: 40px auto;">
        <button class="btn" onclick="drawOmikuji()" style="background: #8e44ad;">‰ªäÊó•„ÅÆÈÅãÂã¢ („Åä„Åø„Åè„Åò)</button>
        <div id="omikuji-result" style="font-size: 2rem; font-weight: bold; margin-top: 10px; height: 40px;"></div>
    </div>

    <!-- BBS SECTION -->
    <section id="bbs-section" class="container">
        <div class="section-header">
            <h2>BULLETIN BOARD</h2>
        </div>
        <div id="bbs-list"
            style="max-height: 400px; overflow-y: auto; margin-bottom: 20px; border: 1px solid #333; padding: 10px;">
            <!-- Posts go here -->
        </div>
        <div>
            <input type="text" id="bbs-name" placeholder="Name" style="width: 30%;">
            <input type="text" id="bbs-msg" placeholder="Message" style="width: 68%;">
            <button class="btn" onclick="postBBS()">POST</button>
        </div>
    </section>

    <!-- VIDEOS -->
    <section id="videos">
        <div class="container">
            <div class="section-header">
                <h2>LATEST VIDEOS</h2>
            </div>
            <div id="featured-video-container" style="margin-bottom: 30px; display:none;"></div>
            <div id="video-grid" class="video-grid">
                <div style="text-align:center; width:100%;">Loading...</div>
            </div>
        </div>
    </section>

    <!-- GACHA -->
    <section id="gacha" style="text-align:center; padding: 60px 0; background:#111;">
        <div class="container">
            <h2>VIDEO GACHA</h2>
            <div id="gacha-display"
                style="border: 2px dashed #555; height: 300px; display:flex; align-items:center; justify-content:center; margin: 20px auto; max-width:600px; border-radius:10px;">
                <span style="font-size:3rem;">?</span>
            </div>
            <button class="btn" onclick="runGacha()">ROLL GACHA</button>
        </div>
    </section>

    <!-- Request Section (Restored) -->
    <section id="requests">
        <div class="container">
            <div class="request-box"
                style="text-align: center; background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%); padding: 60px; border-radius: 20px; border: 1px solid #333;">
                <div class="section-header">
                    <h2>REQUESTS</h2>
                </div>
                <p style="color: var(--text-sub); margin-bottom: 30px;">
                    „Äå„Åì„Çì„Å™„Ç≤„Éº„É†„ÇÑ„Å£„Å¶„Åª„Åó„ÅÑÔºÅ„Äç„Äå„Åì„Çì„Å™‰ºÅÁîª„ÅåË¶ã„Åü„ÅÑÔºÅ„Äç„Å™„Å©„ÄÅ<br>
                    ÁöÜÊßò„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂ∏∏ÊôÇÂèó„Åë‰ªò„Åë„Å¶„Åä„Çä„Åæ„Åô„ÄÇ
                </p>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSftF6KfkNEqgy2fKQM_nzo3R5a6phZCnMkGQc400XSL1MoVPA/viewform"
                    target="_blank" class="btn" style="background: white; color: black;">
                    „É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ„Çã (Google Form)
                </a>
            </div>
        </div>
    </section>

    <!-- STATUS & TROPHIES -->
    <section id="status-trophies" style="background: #111; padding: 60px 0;">
        <div class="container">
            <div class="section-header">
                <h2>KEICHII STATUS & ACHIEVEMENTS</h2>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:40px;">
                <!-- STOCK MARKET -->
                <div>
                    <h3 style="border-bottom:2px solid var(--accent); padding-bottom:10px; margin-bottom:20px;">KEICHII
                        STOCK MARKET</h3>
                    <div style="background:#222; border:1px solid #444; border-radius:10px; padding:15px;">
                        <canvas id="stock-chart"
                            style="width:100%; height:150px; background:#000; border:1px solid #333;"></canvas>
                        <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center;">
                            <div>
                                <div style="font-size:0.8rem; color:#aaa;">CURRENT PRICE</div>
                                <div id="stock-price" style="font-size:1.5rem; font-weight:bold; color:var(--accent);">
                                    150 KP</div>
                            </div>
                            <div style="text-align:right;">
                                <div style="font-size:0.8rem; color:#aaa;">YOU OWN</div>
                                <div id="stock-owned" style="font-size:1.2rem; font-weight:bold;">0 STK</div>
                            </div>
                        </div>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:15px;">
                            <button class="btn" onclick="tradeStock('buy')" style="background:green;">BUY (1
                                STK)</button>
                            <button class="btn" onclick="tradeStock('sell')" style="background:red;">SELL (ALL)</button>
                        </div>
                    </div>
                </div>

                <!-- TROPHY ROOM -->
                <div>
                    <h3 style="border-bottom:2px solid gold; padding-bottom:10px; margin-bottom:20px; color:gold;">
                        TROPHY ROOM</h3>
                    <div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:10px;" id="trophy-grid">
                        <div class="trophy" id="t-login" title="First Login">üö™</div>
                        <div class="trophy" id="t-click" title="Click Master (100 Clicks)">üñ±Ô∏è</div>
                        <div class="trophy" id="t-rich" title="Rich (1000 KP)">üí∞</div>
                        <div class="trophy" id="t-fan" title="God Fan (Rank 100)">üëë</div>
                        <div class="trophy" id="t-shop" title="Shopper (Buy Item)">üõçÔ∏è</div>
                        <div class="trophy" id="t-secret" title="???">‚ùì</div>
                    </div>
                    <div id="trophy-msg" style="margin-top:20px; font-size:0.9rem; color:#aaa; min-height:20px;">Login
                        to view achievements</div>
                </div>
            </div>

            <!-- FAN CHECK BTN (MOVED) -->
            <div style="text-align: center; margin-top: 50px;">
                <button class="btn" style="background: linear-gradient(45deg, #ff0000, #ff5500); font-size: 1.2rem;"
                    onclick="checkFanLevel()">
                    üî• „Åë„ÅÑ„Å°„ÅÑÊÑõ„É¨„Éô„É´Ë®∫Êñ≠ üî•
                </button>
                <div id="fan-result" style="margin-top: 20px; font-size: 1.5rem; font-weight: bold; min-height: 40px;">
                </div>
            </div>

        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <p>&copy; 2024 Keichii Official.</p>
            <div style="margin-top: 30px;">
                <button id="admin-trigger-btn" class="btn"
                    style="background:#222; font-size:0.8rem; padding: 5px 15px;">ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥</button>
            </div>
            <div style="margin-top: 10px; font-size: 0.7rem; color: #333; cursor: pointer;" onclick="showQuiz()">?
                Secret Room ?</div>
        </div>
    </footer>


    <!-- ADMIN MODAL -->
    <div id="admin-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; overflow-y:auto;">
        <div class="admin-panel">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <h2>ADMIN DASHBOARD</h2>
                <button onclick="document.getElementById('admin-modal').style.display='none'" class="btn"
                    style="background:#444;">CLOSE</button>
            </div>

            <!-- LOGIN -->
            <div id="admin-login">
                <p>Password Required:</p>
                <input type="password" id="admin-pass">
                <!-- Hint is HIDDEN as requested -->
                <button onclick="loginAdmin()" class="btn">LOGIN</button>
            </div>

            <!-- DASHBOARD -->
            <div id="admin-dash" style="display:none;">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                    <!-- Col 1 -->
                    <div>
                        <div class="admin-section">
                            <h4>üìù Memo</h4>
                            <textarea id="admin-memo" placeholder="Ideas..."></textarea>
                            <button onclick="saveMemo()" class="btn"
                                style="padding:5px 10px; font-size:0.8rem;">Save</button>
                        </div>
                        <div class="admin-section">
                            <h4>üì¢ News Ticker</h4>
                            <input type="text" id="admin-news" placeholder="Add to ticker...">
                            <button onclick="updateTicker()" class="btn"
                                style="padding:5px 10px; font-size:0.8rem;">Update</button>
                        </div>
                        <div class="admin-section">
                            <h4>üé® Color</h4>
                            <input type="color"
                                onchange="document.documentElement.style.setProperty('--accent', this.value)">
                        </div>
                    </div>
                    <!-- Col 2: GOD TIER -->
                    <div>
                        <div class="admin-section">
                            <h4 style="color:red;">üî® BAN HAMMER</h4>
                            <p style="font-size:0.8rem; color:#aaa;">Ban current user (IP simulator)</p>

                            <button onclick="unbanUser()" class="btn"
                                style="background:green; width:100%; margin-top:5px;">UNBAN</button>
                        </div>
                        <div class="admin-section">
                            <h4 style="color:gold;">‚ö° God Tools</h4>
                            <button onclick="toggleGlobalEdit()" class="btn"
                                style="width:100%; background:#444; margin-bottom:5px;">Global Edit</button>
                            <button onclick="triggerEmergency()" class="btn"
                                style="width:100%; background:red; margin-bottom:5px;">EMERGENCY</button>
                            <button onclick="toggleTerminal()" class="btn"
                                style="width:100%; background:#0f0; color:black; margin-bottom: 5px;">TERMINAL</button>
                        </div>
                        <div class="admin-section">
                            <h4>üì∫ Featured Video</h4>
                            <input type="text" id="feat-id" placeholder="Video ID">
                            <button onclick="setFeatured()" class="btn" style="padding:5px 10px;">Set</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TERMINAL -->
    <div id="terminal-overlay"
        style="display:none; position:fixed; bottom:0; left:0; width:100%; height:40vh; background:black; border-top:2px solid #0f0; z-index:9998; padding:20px; color:#0f0; font-family:monospace; overflow:hidden;">
    </div>

    <!-- EMERGENCY -->
    <div id="emergency-overlay"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:red; z-index:9999; animation:blink 0.2s infinite; display:none; flex-direction:column; justify-content:center; align-items:center;">
        <h1 style="font-size:5rem; color:white;">EMERGENCY</h1>
        <button onclick="document.getElementById('emergency-overlay').style.display='none'"
            style="padding:20px;">STOP</button>
    </div>

    <!-- LOGIN MODAL (ACCOUNT) -->
    <div id="login-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2001; align-items:center; justify-content:center;">
        <div
            style="background:#222; padding:40px; border-radius:10px; border:2px solid var(--accent); text-align:center; max-width:400px; width:90%;">
            <h3 style="margin-bottom:20px;">KEICHII FAN CLUB LOGIN</h3>
            <input type="text" id="login-username" placeholder="Username" style="margin-bottom:20px;">
            <button class="btn" onclick="performLogin()">LOGIN / SIGNUP</button>
            <button onclick="document.getElementById('login-modal').style.display='none'"
                style="display:block; margin:20px auto 0; background:none; border:none; color:#888;">Close</button>
        </div>
    </div>

    <!-- FAN QUIZ MODAL -->
    <div id="fan-quiz-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2002; align-items:center; justify-content:center;">
        <div
            style="background:#1a1a1a; padding:30px; border-radius:15px; border:2px solid var(--accent); max-width:500px; width:90%; color:white;">
            <h3 style="text-align:center; margin-bottom:20px; color:var(--accent);">üî• „Åë„ÅÑ„Å°„ÅÑÊ§úÂÆö üî•</h3>

            <div id="quiz-q1" class="quiz-step" style="display:block;">
                <p style="margin-bottom:15px;">Q1. „Åë„ÅÑ„Å°„ÅÑ„ÅÆ„Ç§„É°„Éº„Ç∏„Ç´„É©„Éº„ÅØÔºü</p>
                <button class="btn" onclick="nextQuiz(1, 10)" style="width:100%; margin-bottom:10px;">Ëµ§ (Red)</button>
                <button class="btn" onclick="nextQuiz(1, 0)" style="width:100%; background:#333;">Èùí (Blue)</button>
                <button class="btn" onclick="nextQuiz(1, 0)" style="width:100%; background:#333;">ÈÄèÊòé
                    (Invisible)</button>
            </div>

            <div id="quiz-q2" class="quiz-step" style="display:none;">
                <p style="margin-bottom:15px;">Q2. „Åë„ÅÑ„Å°„ÅÑ„ÅÆÈÖç‰ø°„Çπ„Çø„Ç§„É´„ÅØÔºü</p>
                <button class="btn" onclick="nextQuiz(2, 0)" style="width:100%; margin-bottom:10px; background:#333;">Ê∏ÖÊ•ö
                    (Seiso)</button>
                <button class="btn" onclick="nextQuiz(2, 20)" style="width:100%; margin-bottom:10px;">„Ç´„Ç™„Çπ
                    (Chaos)</button>
                <button class="btn" onclick="nextQuiz(2, -50)" style="width:100%; background:#333;">ËôöÁÑ°
                    (Nothing)</button>
            </div>

            <div id="quiz-q3" class="quiz-step" style="display:none;">
                <p style="margin-bottom:15px;">Q3. „Åë„ÅÑ„Å°„ÅÑ„ÅØÊúÄÂº∑„Åß„ÅÇ„Çã„ÄÇ</p>
                <button class="btn" onclick="nextQuiz(3, 70)" style="width:100%; margin-bottom:10px;">„ÅØ„ÅÑ (YES)</button>
                <button class="btn" onclick="nextQuiz(3, -100)" style="width:100%; background:#333;">„ÅÑ„ÅÑ„Åà (NO)</button>
            </div>

            <button onclick="document.getElementById('fan-quiz-modal').style.display='none'"
                style="display:block; margin:20px auto 0; background:none; border:none; color:#888;">Quit</button>
        </div>
    </div>
    <!-- SHOP MODAL -->
    <div id="shop-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2003; align-items:center; justify-content:center;">
        <div
            style="background:#222; padding:30px; border-radius:15px; border:2px solid gold; max-width:600px; width:95%; color:white;">
            <h3 style="text-align:center; margin-bottom:20px; color:gold;">üí∞ KEICHII SHOP üí∞</h3>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                <div style="background:#333; padding:15px; border-radius:8px; text-align:center;">
                    <h4>Golden Name</h4>
                    <p style="font-size:0.8rem; color:#aaa;">BBS Name becomes GOLD</p>
                    <p style="color:gold; font-weight:bold;">500 KP</p>
                    <button class="btn" onclick="buyItem('gold_name', 500)">BUY</button>
                </div>
                <div style="background:#333; padding:15px; border-radius:8px; text-align:center;">
                    <h4>Rainbow Theme</h4>
                    <p style="font-size:0.8rem; color:#aaa;">Unlock Rainbow BG</p>
                    <p style="color:gold; font-weight:bold;">1000 KP</p>
                    <button class="btn" onclick="buyItem('rainbow_bg', 1000)">BUY</button>
                </div>
                <div style="background:#333; padding:15px; border-radius:8px; text-align:center;">
                    <h4>Donate (Fake)</h4>
                    <p style="font-size:0.8rem; color:#aaa;">Just lose money</p>
                    <p style="color:gold; font-weight:bold;">100 KP</p>
                    <button class="btn" onclick="buyItem('donate', 100)">DONATE</button>
                </div>
                <div style="background:#333; padding:15px; border-radius:8px; text-align:center;">
                    <h4>God Title</h4>
                    <p style="font-size:0.8rem; color:#aaa;">Prefix name with [GOD]</p>
                    <p style="color:gold; font-weight:bold;">9999 KP</p>
                    <button class="btn" onclick="buyItem('god_title', 9999)">BUY</button>
                </div>
            </div>
            <button onclick="document.getElementById('shop-modal').style.display='none'"
                style="display:block; margin:20px auto 0; background:none; border:none; color:#888;">Close Shop</button>
        </div>
    </div>

    <!-- LOGIN MODAL (ACCOUNT) -->
    <div id="login-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2001; align-items:center; justify-content:center;">
        <div
            style="background:#222; padding:40px; border-radius:10px; border:2px solid var(--accent); text-align:center; max-width:400px; width:90%;">
            <h3 style="margin-bottom:20px;">KEICHII FAN CLUB LOGIN</h3>
            <input type="text" id="login-username" placeholder="Username" style="margin-bottom:20px;">
            <button class="btn" onclick="performLogin()">LOGIN / SIGNUP</button>
            <button onclick="document.getElementById('login-modal').style.display='none'"
                style="display:block; margin:20px auto 0; background:none; border:none; color:#888;">Close</button>
        </div>
    </div>

    <!-- QUIZ MODAL -->
    <div id="quiz-modal" class="quiz-modal">
        <h3>CULT QUIZ</h3>
        <p>Q. „Åë„ÅÑ„Å°„ÅÑ„ÅÆÂ•Ω„Åç„Å™È£ü„ÅπÁâ©„ÅØÔºü</p>
        <button onclick="alert('Ê≠£Ëß£ÔºÅ')" class="btn" style="margin:5px;">„Éù„ÉÜ„Éà</button>
        <button onclick="alert('‰∏çÊ≠£Ëß£ÔºÅ')" class="btn" style="margin:5px;">ÂØøÂè∏</button>
        <button onclick="document.getElementById('quiz-modal').style.display='none'"
            style="display:block; margin:20px auto; background:none; border:none; color:#888;">Close</button>
    </div>

    <script>
        // --- CONFIG & INIT ---
        const API_KEY = 'AIzaSyC3Ap4eXD-UM3lZDfvjXVQqJZFcQvOWqX8';
        const CHANNEL_ID = 'UCQEzA7Osw6Wm2jTdZgTTpmg';
        const PASSWORD = 'keichiidougahankamisugidayonee';

        window.onload = () => {
            checkBan();
            fetchVideos();
            initCursor();
            initBBS();
            loadAdminData();
            checkLogin();
            initStockMarket();


            // Konami Code
            let kCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
            let kIdx = 0;
            document.addEventListener('keydown', (e) => {
                if (e.key === kCode[kIdx]) {
                    kIdx++;
                    if (kIdx === kCode.length) {
                        alert('KONAMI CODE ACTIVATED: GOD MODE ON');
                        document.body.style.transform = 'skew(10deg)';
                        kIdx = 0;
                    }
                } else { kIdx = 0; }
            });
        };

        // --- VIDEOS ---
        let allVideos = [];
        async function fetchVideos() {
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet,id&order=date&maxResults=9&type=video`);
                const data = await res.json();
                allVideos = data.items || [];
                const grid = document.getElementById('video-grid');
                grid.innerHTML = allVideos.map(v => `
                    <div class="video-card">
                        <div class="video-thumbnail">
                            <img src="${v.snippet.thumbnails.high.url}">
                        </div>
                        <div style="padding:15px;">
                            <h4 style="font-size:0.9rem;">${v.snippet.title}</h4>
                            <a href="https://www.youtube.com/watch?v=${v.id.videoId}" target="_blank" style="color:var(--accent); font-size:0.8rem;">Watch</a>
                        </div>
                    </div>
                `).join('');
            } catch (e) { document.getElementById('video-grid').innerHTML = 'Load failed'; }
        }

        // --- GACHA ---
        function runGacha() {
            if (allVideos.length === 0) return;
            const disp = document.getElementById('gacha-display');
            disp.innerHTML = '<span style="font-size:3rem; animation:spin 0.1s infinite;">üé≤</span>';
            setTimeout(() => {
                const v = allVideos[Math.floor(Math.random() * allVideos.length)];
                disp.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${v.id.videoId}?autoplay=1" frameborder="0"></iframe>`;
            }, 1000);
        }

        // --- BBS ---
        function initBBS() {
            const list = document.getElementById('bbs-list');
            const posts = JSON.parse(localStorage.getItem('keichii_bbs') || '[]');
            renderBBS(posts);
        }
        function postBBS() {
            const name = document.getElementById('bbs-name').value || 'Anonymous';
            const msg = document.getElementById('bbs-msg').value;
            if (!msg) return;
            const posts = JSON.parse(localStorage.getItem('keichii_bbs') || '[]');
            posts.unshift({ name, msg, date: new Date().toLocaleString() });
            localStorage.setItem('keichii_bbs', JSON.stringify(posts));
            renderBBS(posts);
            document.getElementById('bbs-msg').value = '';
        }
        function renderBBS(posts) {
            document.getElementById('bbs-list').innerHTML = posts.map(p => `
                <div class="bbs-post"><div class="bbs-name">${p.name} <span style="font-size:0.7rem; color:#666;">${p.date}</span></div><div class="bbs-msg">${p.msg}</div></div>
            `).join('');
        }

        // --- ADMIN ---
        document.getElementById('admin-trigger-btn').onclick = () => document.getElementById('admin-modal').style.display = 'block';

        function loginAdmin() {
            if (document.getElementById('admin-pass').value === PASSWORD) {
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-dash').style.display = 'block';
            } else { alert('WRONG'); }
        }

        function saveMemo() { localStorage.setItem('keichii_memo', document.getElementById('admin-memo').value); }
        function loadAdminData() { document.getElementById('admin-memo').value = localStorage.getItem('keichii_memo') || ''; }
        function updateTicker() { document.getElementById('ticker-content').textContent = document.getElementById('admin-news').value; }

        function setFeatured() {
            const id = document.getElementById('feat-id').value;
            document.getElementById('featured-video-container').style.display = 'block';
            document.getElementById('featured-video-container').innerHTML = `<iframe width="100%" height="400" src="https://www.youtube.com/embed/${id}" frameborder="0"></iframe>`;
        }

        // --- GOD TOOLS & CHAOS ---
        function banUser() { localStorage.setItem('keichii_banned', 'true'); checkBan(); }
        function unbanUser() { localStorage.removeItem('keichii_banned'); location.reload(); }
        function checkBan() { if (localStorage.getItem('keichii_banned')) document.getElementById('banned-screen').style.display = 'flex'; }

        function toggleGlobalEdit() { document.body.contentEditable = document.body.contentEditable !== 'true'; alert('EDIT MODE TOGGLED'); }
        function triggerEmergency() {
            const el = document.getElementById('emergency-overlay');
            el.style.display = 'flex';
            el.style.animation = 'blink 0.1s infinite';
        }
        function toggleTerminal() {
            const t = document.getElementById('terminal-overlay');
            t.style.display = t.style.display === 'block' ? 'none' : 'block';
            if (t.style.display === 'block') {
                setInterval(() => { t.innerHTML += `> SYSTEM OVERRIDE... [${Math.random()}]<br>`; t.scrollTop = t.scrollHeight; }, 50);
            }
        }

        let quizScore = 0;
        function checkFanLevel() {
            // Reset and open modal
            quizScore = 0;
            document.querySelectorAll('.quiz-step').forEach(el => el.style.display = 'none');
            document.getElementById('quiz-q1').style.display = 'block';
            document.getElementById('fan-quiz-modal').style.display = 'flex';
        }

        function nextQuiz(step, points) {
            quizScore += points;
            document.getElementById(`quiz-q${step}`).style.display = 'none';

            if (step < 3) {
                document.getElementById(`quiz-q${step + 1}`).style.display = 'block';
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('fan-quiz-modal').style.display = 'none';
            const el = document.getElementById('fan-result');

            // Normalize score
            if (quizScore < 0) quizScore = 0;
            if (quizScore > 100) quizScore = 100;

            let msg = '';
            let color = 'white';

            if (quizScore === 100) { msg = 'GOD (Á•û)'; color = 'gold'; }
            else if (quizScore >= 80) { msg = 'ELITE (Á≤æÈã≠)'; color = '#f39c12'; }
            else if (quizScore >= 40) { msg = 'NORMAL (‰∏ÄËà¨‰∫∫)'; color = 'white'; }
            else { msg = 'FAKE FAN („Å´„Çè„Åã)'; color = '#7f8c8d'; }

            el.innerHTML = `LEVEL: <span style="color:${color}; font-size:3rem; text-shadow: 0 0 10px ${color};">${quizScore}%</span><br><span style="font-size:1rem; color:#aaa;">${msg}</span>`;

            // Link to Account
            const user = localStorage.getItem('keichii_username');
            if (user) {
                el.innerHTML += `<div style="font-size:0.8rem; margin-top:5px; color:#555;">Certified for: ${user}</div>`;
            }
        }

        // --- STOCK MARKET ---
        let stockPrice = 100;
        let stockHistory = [];
        let stockOwned = 0;

        function initStockMarket() {
            stockOwned = parseInt(localStorage.getItem('keichii_stock') || '0');
            updateStockUI();

            // Simulation Loop
            setInterval(() => {
                // Random fluctuation
                let change = (Math.random() - 0.48) * 20; // Slight upward bias
                if (Math.random() < 0.05) change = -50; // Crash
                if (Math.random() < 0.05) change = 100; // Spike

                stockPrice += change;
                if (stockPrice < 10) stockPrice = 10;
                if (stockPrice > 9999) stockPrice = 9999;

                stockHistory.push(stockPrice);
                if (stockHistory.length > 50) stockHistory.shift();

                drawStockChart();
                updateStockUI();
            }, 1000);
        }

        function drawStockChart() {
            const cvs = document.getElementById('stock-chart');
            if (!cvs) return;
            const ctx = cvs.getContext('2d');
            cvs.width = cvs.parentElement.offsetWidth;
            cvs.height = 150;

            ctx.clearRect(0, 0, cvs.width, cvs.height);
            ctx.strokeStyle = '#00ff00';
            if (stockHistory.length > 1 && stockHistory[stockHistory.length - 1] < stockHistory[stockHistory.length - 2]) {
                ctx.strokeStyle = '#ff0000';
            }
            ctx.lineWidth = 2;

            ctx.beginPath();
            const max = Math.max(...stockHistory, 200);
            const min = Math.min(...stockHistory, 50);

            stockHistory.forEach((p, i) => {
                const x = (i / 50) * cvs.width;
                const y = cvs.height - ((p - min) / (max - min) * (cvs.height - 20)) - 10;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }

        function updateStockUI() {
            const priceEl = document.getElementById('stock-price');
            const ownEl = document.getElementById('stock-owned');
            if (priceEl) priceEl.textContent = Math.floor(stockPrice) + ' KP';
            if (ownEl) ownEl.textContent = stockOwned + ' STK';

            if (priceEl) {
                priceEl.style.color = (stockHistory.length > 1 && stockPrice >= stockHistory[stockHistory.length - 2])
                    ? '#00ff00' : '#ff0000';
            }
        }

        function tradeStock(action) {
            const p = Math.floor(stockPrice);
            if (action === 'buy') {
                if (kp < p) return alert('NOT ENOUGH KP!');
                updateKP(-p);
                stockOwned++;
                localStorage.setItem('keichii_stock', stockOwned);
                alert(`BOUGHT 1 STOCK @ ${p} KP`);
            } else {
                if (stockOwned <= 0) return alert('NO STOCK TO SELL!');
                const gain = stockOwned * p;
                updateKP(gain);
                alert(`SOLD ${stockOwned} STOCK FOR ${gain} KP`);
                stockOwned = 0;
                localStorage.setItem('keichii_stock', stockOwned);
            }
            updateStockUI();
        }

        function checkAchievements() {
            const user = localStorage.getItem('keichii_username');
            if (!user) return;

            const achievements = JSON.parse(localStorage.getItem('keichii_achievements') || '{}');
            const unlock = (id) => {
                if (!achievements[id]) {
                    achievements[id] = true;
                    localStorage.setItem('keichii_achievements', JSON.stringify(achievements));
                    alert(`üèÜ ACHIEVEMENT UNLOCKED: ${id.toUpperCase()}! üèÜ`);
                }
                document.getElementById('t-' + id).classList.add('unlocked');
            }

            // A1: Login (Always true if here)
            unlock('login');

            // A2: Click Master
            const clicks = parseInt(document.getElementById('click-count').textContent);
            if (clicks >= 100) unlock('click');

            // A3: Rich
            if (kp >= 1000) unlock('rich');

            // A4: Fan
            // Checked in quiz result

            // A5: Shop
            const inv = JSON.parse(localStorage.getItem('keichii_inventory') || '{}');
            if (Object.keys(inv).length > 0) unlock('shop');

            document.getElementById('trophy-msg').textContent = `Achievements for ${user}`;
        }
        function toggleGravity() {
            document.querySelectorAll('div, section, h1, p').forEach(el => el.classList.add('falling'));
            setTimeout(() => alert('Gravity restored on reload'), 2000);
        }

        // --- FUN STUFF ---
        function spawnHeart(e) {
            const h = document.createElement('div'); h.textContent = '‚ù§'; h.className = 'heart-particle';
            h.style.left = e.clientX + 'px'; h.style.top = e.clientY + 'px';
            document.body.appendChild(h); setTimeout(() => h.remove(), 1000);
        }

        // --- ECONOMY (KP) ---
        let kp = 0;
        function updateKP(amount) {
            kp += amount;
            localStorage.setItem('keichii_kp', kp);
            const el = document.getElementById('nav-kp-item');
            if (el) {
                el.textContent = `${kp} KP`;
                el.style.display = localStorage.getItem('keichii_username') ? 'block' : 'none';
            }
        }
        function openShop() { document.getElementById('shop-modal').style.display = 'flex'; }

        function buyItem(item, cost) {
            if (kp < cost) return alert('KP„ÅåË∂≥„Çä„Åæ„Åõ„ÇìÔºÅ (NOT ENOUGH KP)');
            if (!confirm(`Buy ${item} for ${cost} KP?`)) return;

            updateKP(-cost);
            let inventory = JSON.parse(localStorage.getItem('keichii_inventory') || '{}');
            inventory[item] = true;
            localStorage.setItem('keichii_inventory', JSON.stringify(inventory));
            applyInventory();
            checkAchievements(); // Check for shopper achievement
            alert('PURCHASE SUCCESSFUL!');
        }

        function applyInventory() {
            const inventory = JSON.parse(localStorage.getItem('keichii_inventory') || '{}');
            if (inventory.rainbow_bg) document.body.style.background = 'linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)';
        }

        function clickerIncrement() {
            const el = document.getElementById('click-count');
            el.textContent = parseInt(el.textContent) + 1;
            updateKP(1); // Earn KP
            checkAchievements();
        }

        function drawOmikuji() {
            const r = ['Â§ßÂêâ', 'Âêâ', 'Âá∂', 'Â§ßÂá∂', 'Á•û', 'ËôöÁÑ°'];
            document.getElementById('omikuji-result').textContent = r[Math.floor(Math.random() * r.length)];
        }

        function startConfetti() {
            for (let i = 0; i < 50; i++) {
                const c = document.createElement('div'); c.className = 'confetti';
                c.style.left = Math.random() * 100 + 'vw'; c.style.backgroundColor = '#' + Math.floor(Math.random() * 16777215).toString(16);
                c.style.animationDuration = (Math.random() * 2 + 2) + 's';
                document.body.appendChild(c);
            }
        }



        // Canvas Cursor
        function initCursor() {
            const cvs = document.getElementById('cursor-canvas');
            const ctx = cvs.getContext('2d');
            cvs.width = window.innerWidth; cvs.height = window.innerHeight;
            let particles = [];
            window.onmousemove = (e) => {
                for (let i = 0; i < 3; i++) particles.push({ x: e.clientX, y: e.clientY, vx: Math.random() - 0.5, vy: Math.random() - 0.5, life: 1 });
            };
            function loop() {
                ctx.clearRect(0, 0, cvs.width, cvs.height);
                particles.forEach((p, i) => {
                    p.x += p.vx; p.y += p.vy; p.life -= 0.02;
                    ctx.fillStyle = `rgba(255,255,0,${p.life})`; ctx.fillRect(p.x, p.y, 3, 3);
                    if (p.life <= 0) particles.splice(i, 1);
                });
                requestAnimationFrame(loop);
            }
            loop();
        }

        function showQuiz() { document.getElementById('quiz-modal').style.display = 'block'; }
        function playSound(type) { alert(type === 'bruh' ? 'Bruh Sound Effect #2' : 'Wow!'); }
        // --- ACCOUNT SYSTEM ---
        function openLoginModal() {
            document.getElementById('login-modal').style.display = 'flex';
        }

        function performLogin() {
            const name = document.getElementById('login-username').value;
            if (!name) return alert('ÂêçÂâç„ÇíÂÖ•„Çå„Å¶„Å≠ÔºÅ');
            localStorage.setItem('keichii_username', name);
            checkLogin();
            document.getElementById('login-modal').style.display = 'none';
            alert(`„Çà„ÅÜ„Åì„Åù„ÄÅ${name}ÔºÅ („Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàêÂÆå‰∫Ü)`);
        }

        function checkLogin() {
            const user = localStorage.getItem('keichii_username');
            const loginBtn = document.getElementById('nav-login-item');
            const userDisplay = document.getElementById('nav-user-item');

            if (user) {
                loginBtn.style.display = 'none';
                userDisplay.style.display = 'block';
                userDisplay.innerHTML = `${user} <span style="font-size:0.7rem; color:#888; cursor:pointer;" onclick="logout()">(LOGOUT)</span>`;

                // Initialize KP
                kp = parseInt(localStorage.getItem('keichii_kp') || '0');
                updateKP(0);

                // Login Bonus
                const lastLogin = localStorage.getItem('keichii_last_login');
                const today = new Date().toDateString();
                if (lastLogin !== today) {
                    updateKP(100);
                    localStorage.setItem('keichii_last_login', today);
                    alert('üéÅ LOGIN BONUS: +100 KP! üéÅ');
                }



                checkAchievements();
                applyInventory();

                // Auto-fill BBS
                const bbsInput = document.getElementById('bbs-name');
                if (bbsInput) {
                    const inventory = JSON.parse(localStorage.getItem('keichii_inventory') || '{}');
                    let display = user;
                    if (inventory.god_title) display = `[GOD] ${display}`;
                    bbsInput.value = display;
                    if (inventory.gold_name) bbsInput.style.color = 'gold';
                }

                // Auto-fill Fan Check
                if (document.getElementById('fan-result').innerHTML === '') {
                    document.getElementById('fan-result').innerHTML = `<span style="font-size:1rem; color:#aaa;">(Logged in as ${user})</span>`;
                }
            } else {
                loginBtn.style.display = 'block';
                userDisplay.style.display = 'none';
                document.getElementById('nav-kp-item').style.display = 'none';
            }
        }

        function logout() {
            if (confirm('„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åô„ÅãÔºü')) {
                localStorage.removeItem('keichii_username');
                location.reload();
            }
        }

    </script>
</body>

</html>